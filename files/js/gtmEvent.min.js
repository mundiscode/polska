var GtmEvent=function(a){var f=this;var b=a;this.preventDefaultEnabled=false;var e=800;var d=0;var c=2;this.dlReadyImpressions=function(k,g){if(d>=c){return false}if(!(typeof g!=="undefined"&&g>0&&g<=c&&(g-1)==d)){return false}if(typeof k!=="object"&&typeof id!=="undefined"){return false}d=g;var i=3;var m=9;var o=k.length;var l=Math.floor(o/i/c)*i;if(l<m){l=m}var j=(g*l)-l;if(j>o){return false}var h=(g*l);if(g===c){h=o}var n=k.slice(j,h);if(!n.length>0){return false}dataLayer.push({ecommerce:{impressions:n},event:"dlReadyImpressions"})};this.dlClickReady=function(g){if(!(typeof g==="object"&&typeof g.url!=="undefined"&&g.url!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var h=false;var i=setTimeout(function(){if(!h){document.location=g.url}},e);dataLayer.push({event:"dlClickReady",ecommerce:{click:{actionField:{list:g.list},products:[{name:g.name,id:g.id,price:g.price,category:g.category,brand:g.brand,variant:g.variant,prodPostac:g.prodPostac,dimension1:g.dimension1,dimension2:g.dimension2,dimension3:g.dimension3,dimension4:g.dimension4,dimension5:g.dimension5,dimension6:g.dimension6,dimension7:g.dimension7,dimension11:g.dimension11,dimension12:g.dimension12,dimension13:g.dimension13,dimension14:g.dimension14,dimension15:g.dimension15,dimension16:g.dimension16,position:g.position}]}},eventCallback:function(){h=true;clearTimeout(i);document.location=g.url}})};this.promotionWithCallbackClick=function(g,i){if(!(typeof g==="object"&&typeof g.name!=="undefined"&&g.name!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var h=false;var j=setTimeout(function(){if(!h){if(typeof i==="function"){var k=i();if(k===false){document.location=g.name}}else{document.location=g.name}}},e);dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:g.id,key:g.key,name:g.name,creative:g.creative,position:g.position}]}},eventCallback:function(){h=true;clearTimeout(j);if(typeof i==="function"){var k=i();if(k===false){document.location=g.name}}else{document.location=g.name}}});return true};this.promotionClick=function(g){if(!(typeof g==="object"&&typeof g.name!=="undefined"&&g.name!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var h=false;var i=setTimeout(function(){if(!h){document.location=g.name}},e);dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:g.id,key:g.key,name:g.name,creative:g.creative}]}},eventCallback:function(){h=true;clearTimeout(i);document.location=g.name}});return true};this.productPromotionClick=function(g){if(!(typeof g==="object"&&typeof g.name!=="undefined"&&g.name!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var h=false;var i=setTimeout(function(){if(!h){document.location=g.name}},e);dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:g.id,key:g.key,name:g.name,creative:g.creative,product:g.product}]}},eventCallback:function(){h=true;clearTimeout(i);document.location=g.name}});return true};this.categoryClick=function(h){if(!(typeof h==="object"&&typeof h.url!=="undefined"&&h.url!=""&&typeof h.label!=="undefined"&&h.label!=""&&typeof h.action!=="undefined"&&h.action!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var g=false;var i=setTimeout(function(){if(!g){document.location=h.url}},e);dataLayer.push({event:"TraceCategoryClicks",eventAction:h.action,eventLabel:h.label,eventCallback:function(){g=true;clearTimeout(i);document.location=h.url}});return true};this.telemedicoClick=function(g){if(!(typeof g==="object"&&typeof g.label!=="undefined"&&g.label!=""&&typeof g.action!=="undefined"&&g.action!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();dataLayer.push({event:"Telemedico",eventAction:g.action,eventLabel:g.label});return true};this.checkoutCoupon=function(h){if(!(typeof h.coupon!=="undefined"&&h.coupon!=""&&typeof h.url!=="undefined"&&h.url!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var g=false;var i=setTimeout(function(){if(!g){document.location=h.url}},e);dataLayer.push({ecommerce:{checkout_option:{actionField:{step:1,coupon:h.coupon}}},event:"checkoutCoupon",eventCallback:function(){g=true;clearTimeout(i);document.location=h.url}})};this.checkoutDeliveryLogin=function(h){if(!(typeof h.submitFormId!=="undefined"&&h.submitFormId!=""&&$("#"+h.submitFormId).length>0)){return false}if(!this.isGtmReady()){$("#"+h.submitFormId).submit();return false}this.preventDefault();var g=false;var i=setTimeout(function(){if(!g){$("#"+h.submitFormId).submit()}},e);dataLayer.push({ecommerce:{checkout_option:{actionField:{step:2,option:"logowanie-zwykle"}}},event:"checkoutDelivery",eventCallback:function(){g=true;clearTimeout(i);$("#"+h.submitFormId).submit()}})};this.checkoutDeliveryFbLogin=function(g){if(!this.isGtmReady()){return false}this.preventDefault();dataLayer.push({ecommerce:{checkout_option:{actionField:{step:2,option:"logowanie-facebook"}}},event:"checkoutDelivery",eventCallback:function(){return false}})};this.checkoutDeliveryRegister=function(h){if(!(typeof h.url!=="undefined"&&h.url!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var g=false;var i=setTimeout(function(){if(!g){document.location=h.url}},e);dataLayer.push({ecommerce:{checkout_option:{actionField:{step:2,option:"utworzenie-konta"}}},event:"checkoutDelivery",eventCallback:function(){g=true;clearTimeout(i);document.location=h.url}})};this.checkoutDeliveryPasswordRemind=function(h){if(!(typeof h.url!=="undefined"&&h.url!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var g=false;var i=setTimeout(function(){if(!g){document.location=h.url}},e);dataLayer.push({ecommerce:{checkout_option:{actionField:{step:2,option:"przypomnienie-hasÅ‚a"}}},event:"checkoutDelivery",eventCallback:function(){g=true;clearTimeout(i);document.location=h.url}})};this.hpProdBoks=function(h){if(!(typeof h.url!=="undefined"&&h.url!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var g=false;var i=setTimeout(function(){if(!g){document.location=h.url}},e);dataLayer.push({event:"hpProdBoks",hpBoks:h.title,hpProd:h.productName,eventCallback:function(){g=true;clearTimeout(i);document.location=h.url}})};this.lekProdBoks=function(h){if(!(typeof h.url!=="undefined"&&h.url!="")){return false}if(!this.isGtmReady()){return false}this.preventDefault();var g=false;var i=setTimeout(function(){if(!g){document.location=h.url}},e);dataLayer.push({event:"lekProdBoks",lekBoks:h.title,lekProd:h.productName,eventCallback:function(){g=true;clearTimeout(i);document.location=h.url}})};this.recipeFill=function(g){if(!(typeof g.nfz!=="undefined"&&typeof g.rights!=="undefined"&&typeof g.refundType!=="undefined")){return false}dataLayer.push({event:"recepta",receptaOdd:g.nfz,receptaUpr:g.rights,receptaOdp:g.refundType})};this.askAboutProduct=function(h){if(!(typeof h.productName!=="undefined"&&typeof h.userGender!=="undefined"&&typeof h.userAge!=="undefined")){return false}if(!this.isGtmReady()){if(typeof h.url!=="undefined"&&h.url!=""){document.location=h.url}return false}var g=false;var i=setTimeout(function(){if(!g){if(typeof h.url!=="undefined"&&h.url!=""){document.location=h.url}}},e);dataLayer.push({event:"formProdukt",formProdNazwa:h.productName,formProdPlec:h.userGender,formProdWiek:h.userAge,eventCallback:function(){g=true;clearTimeout(i);if(typeof h.url!=="undefined"&&h.url!=""){document.location=h.url}}})};this.askSpecialist=function(h){if(!(typeof h.section!=="undefined"&&typeof h.userGender!=="undefined"&&typeof h.userAge!=="undefined")){return false}if(!this.isGtmReady()){if(typeof h.url!=="undefined"&&h.url!=""){document.location=h.url}return false}var g=false;var i=setTimeout(function(){if(!g){if(typeof h.url!=="undefined"&&h.url!=""){document.location=h.url}}},e);dataLayer.push({event:"formPoradaSpec",formSpec:h.section,formProdPlec:h.userGender,formProdWiek:h.userAge,eventCallback:function(){g=true;clearTimeout(i);if(typeof h.url!=="undefined"&&h.url!=""){document.location=h.url}}})};this.listFilter=function(g){if(!(typeof g.producer!=="undefined"&&typeof g.sort!=="undefined"&&typeof g.filter!=="undefined")){return false}dataLayer.push({event:"listFiltr",filtrProd:g.producer,filtrPokaz:g.filter,filtrSort:g.sort})};this.getFromArrayById=function(h,i){if(typeof h!=="object"&&typeof i!=="undefined"){return false}for(var g in h){if(typeof h[g]==="object"&&h[g].id!=undefined&&h[g].id===i){return h[g]}}return false};this.getFromArrayByKey=function(h,g){if(typeof h!=="object"&&typeof g!=="undefined"){return false}for(var i in h){if(typeof h[i]==="object"&&h[i].key!=undefined&&h[i].key===g){return h[i]}}return false};this.preventDefault=function(){if(typeof b==="object"){b.preventDefault();f.preventDefaultEnabled=true}};this.isGtmReady=function(){if(typeof dataLayer!=="undefined"&&typeof dataLayer.push==="function"&&typeof dataLayer.push.name!=="undefined"&&dataLayer.push.name===""){return true}return false}};$(document).ready(function(){if(typeof productsArray!=="undefined"&&productsArray.length>0){var a=new GtmEvent();a.dlReadyImpressions(productsArray,1);if(productsArray.length==24&&$(this).scrollTop()>1800){a.dlReadyImpressions(productsArray,2)}else{if($(this).scrollTop()>1300){a.dlReadyImpressions(productsArray,2)}}$(document).scroll(function(){var b=$(this).scrollTop();if(productsArray.length==24&&b>1800){a.dlReadyImpressions(productsArray,2)}else{if(b>1300){a.dlReadyImpressions(productsArray,2)}}})}if($("[data-gtm-event]").length>0){$("body").delegate("[data-gtm-event]","click",function(g){var h=new GtmEvent(g);var b=$(this).attr("data-gtm-event");switch(b){case"dlClickReady":if(typeof productsArray!=="undefined"){var c=h.getFromArrayById(productsArray,$(this).attr("data-gtm-product-id"))}if(typeof c==="object"){c.url=$(this).attr("href");h.dlClickReady(c)}break;case"bannerWithGemiusClick":if(typeof bannersArray!=="undefined"){var e=h.getFromArrayByKey(bannersArray,$(this).attr("data-gtm-banner-key"))}var f=this;var i=function(){var k=new GemiusEvent(g);return k.clickEvent($(f).attr("data-gemius-placement"),$(f).attr("data-gemius-position"),$(f).attr("href"))};if(typeof e==="object"){var j=h.promotionWithCallbackClick(e,i);if(j===false){i()}}else{i()}break;case"promotionClick":if(typeof promotionsArray!=="undefined"){var d=h.getFromArrayByKey(promotionsArray,$(this).attr("data-gtm-promotion-key"))}if(typeof d==="object"){if($(this).attr("href")){d.name=$(this).attr("href")}h.promotionClick(d,i)}break;case"checkoutCoupon":h.checkoutCoupon({coupon:$(this).attr("data-gtm-coupon"),url:$(this).attr("data-gtm-url")});break;case"checkoutDeliveryLogin":h.checkoutDeliveryLogin({submitFormId:$(this).attr("data-gtm-submit-form-id")});break;case"checkoutDeliveryRegister":h.checkoutDeliveryRegister({url:$(this).attr("data-gtm-url")});break;case"checkoutDeliveryPasswordRemind":h.checkoutDeliveryPasswordRemind({url:$(this).attr("data-gtm-url")});break;case"productPromotionClick":h.productPromotionClick({id:$(this).attr("data-gtm-id"),key:$(this).attr("data-gtm-key"),name:$(this).attr("href"),creative:$(this).attr("data-gtm-creative"),product:$(this).attr("data-gtm-product-name")});break;case"categoryClick":h.categoryClick({url:$(this).attr("href"),label:$(this).attr("data-gtm-label"),action:$(this).attr("data-gtm-action")});break;case"lekProdBoks":h.lekProdBoks({title:$(this).attr("data-gtm-title"),productName:$(this).attr("data-gtm-product-name"),url:$(this).attr("href")});break;case"Telemedico":h.telemedicoClick({label:$(this).attr("data-gtm-label"),action:$(this).attr("data-gtm-action")});break}})}});